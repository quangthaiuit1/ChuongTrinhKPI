<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/pages/home.xhtml">

	<ui:define name="content">
		<style>
.selectbllb .ui-chkbox-label {
	font-size: 1.2em;
	margin-left: 20px;
	font-weight: bold;
}

.animated .ui-progressbar-value {
	background-image: url("#{resource['images/pbar-ani.gif']}");
}
</style>
		<script type="text/javascript">
    //<![CDATA[
function start() {
     
    window['progress'] = setInterval(function() {
var pbClient = PF('pbClient'),
oldValue = pbClient.getValue(),
newValue = oldValue + 10;
         
pbClient.setValue(pbClient.getValue() + 10);
     
if(newValue === 100) {
    clearInterval(window['progress']);
}
 
 
    }, 1000);
}
 
function cancel() {
    clearInterval(window['progress']);
    PF('pbClient').setValue(0);
    PF('startButton1').enable();
}
    //]]>
</script>
		<h3 style="margin: 0px">Báo cáo</h3>
		<p:separator />
		<h:form id="list">
			<p:panel
				style="float:right; border:0px; margin-top:-35px !important;background:none;">
				<h:panelGrid id="mainGrid" columns="9"
					style="float:left; margin-bottom:5px">
					<p:commandButton type="submit" value="Báo cáo KPI phòng"
						onclick="PF('widgetKPIDepartmentYear').show()"
						update="
									:dialogKPIDepartmentYear,:messages"
						process="@this" icon="fa fa-file-pdf-o" disabled="true" />
					<p:commandButton type="submit" value="BC KPI cá nhân tháng"
						onclick="PF('widgetKPIPersonalMonth').show()"
						update="
									:dialogKPIPersonalYear,:messages"
						process="@this" icon="fa fa-file-pdf-o" disabled="true" />
					<p:commandButton type="submit" value="BC KPI cá nhân quý"
						onclick="PF('widgetKPIPersonalQuy').show()"
						update="
									:dialogKPIPersonalYear,:messages"
						process="@this" icon="fa fa-file-pdf-o" disabled="true" />
					<p:commandButton type="submit" value="BC KPI cá nhân năm"
						onclick="PF('widgetKPIPersonalYear').show()"
						update="
									:dialogKPIPersonalYear,:messages"
						process="@this" icon="fa fa-file-pdf-o" disabled="true" />
				</h:panelGrid>
			</p:panel>
		</h:form>
		<p:separator style="margin-top:80px" />
		<h:form id="list1" style="margin-top:10px">
			<p:panel
				style="float:right; border:0px; margin-top:-35px !important;background:none;">
				<h:panelGrid id="mainGrid" columns="9"
					style="float:left; margin-bottom:5px">
					<p:commandButton type="submit" value="BC ABC cá nhân tháng"
						onclick="PF('wgvABCPersonMonth').show()"
						update=":formABCPersonMonth,:messages" process="@this"
						icon="fa fa-file-pdf-o" />
					<p:commandButton type="submit"
						value="BC ds nhân viên chưa đăng ký KPI" disabled="true"
						onclick="PF('wgvABCPersonMonth').show()"
						update=":formABCPersonMonth,:messages" process="@this"
						icon="fa fa-file-pdf-o" />
				</h:panelGrid>
			</p:panel>
		</h:form>
		<p:dialog widgetVar="wgvABCPersonMonth" resizable="false" width="700"
			height="100" closeOnEscape="true"
			header="Báo cáo ABC cá nhân theo tháng" modal="true">
			<h:form id="formABCPersonMonth">
				<center>
					<p:progressBar id="progressBarClient" widgetVar="pbClient"
						style="width:480px" />
					<h:panelGrid columns="7" style="width:100%" cellspacing="1">
						<p:outputLabel value="Tháng: " />
						<p:selectOneMenu id="month"
							value="#{reportBean.monthSelectedPersonal}">
							<f:selectItems value="#{reportBean.months}" />
						</p:selectOneMenu>
						<p:selectOneMenu
							value="#{reportBean.departmentSelectedPersonalMonth}"
							converter="abstractConverter" effect="fade" var="t"
							style="width:150px;" filter="true" filterMatchMode="custom"
							filterFunction="customFilter">
							<p:ajax process="@this" />

							<f:selectItems value="#{reportBean.departments}" var="item"
								itemLabel="#{item.name}" itemValue="#{item}" />
							<p:column>
								<h:outputText value="#{t.code}" />
							</p:column>
							<p:column>
								<h:outputText value="#{t.showAllNameDepart()}" escape="false" />
							</p:column>
						</p:selectOneMenu>
						<p:outputLabel value="Năm" />
						<p:spinner size="10" value="#{reportBean.yearSelectedPersonal1}"
							min="2017" max="2050">
							<p:ajax process="@this" />
						</p:spinner>
						<p:commandButton type="submit" value="PDF" ajax="false"
							style="background:#fbe4c6;margin-left:100px"
							actionListener="#{reportBean.showReportABCPersonMonth()}"
							onclick="this.form.target='_blank'" icon="ui-icon-calculator" />
						<p:commandButton value="Xuất excel" immediate="true"
							onclick="this.form.target='_blank'" style="float:right"
							ajax="false" id="btnPersonalMonth"
							actionListener="#{reportBean.excelABCPersonalMonth()}" />
					</h:panelGrid>
				</center>
				<p:separator />
			</h:form>
		</p:dialog>
		<!-- Phong nam -->
		<p:dialog widgetVar="widgetKPIDepartmentYear" resizable="false"
			width="500" height="100" closeOnEscape="true"
			header="Báo cáo KPI phòng" modal="true">
			<h:form id="dialogKPIDepartmentYear">
				<center>
					<p:progressBar id="progressBarClient" widgetVar="pbClient"
						style="width:480px" />
					<h:panelGrid columns="4" style="width:100%">
						<p:outputLabel value="Năm: " />
						<p:spinner size="10" value="#{reportBean.yearSelectedDepartment}"
							min="2017" max="2050">
							<p:ajax process="@this" />
						</p:spinner>
						<p:commandButton type="submit" value="PDF" ajax="false"
							style="background:#fbe4c6"
							actionListener="#{reportBean.showReportDepartmentYear()}"
							onclick="this.form.target='_blank'" icon="ui-icon-calculator" />
						<p:commandButton value="Xuất excel" immediate="true"
							style="float:right" ajax="false" id="btnDepartmentYear"
							actionListener="#{reportBean.excelDepartmentYear()}"
							onclick="start()" widgetVar="startButton1" />
					</h:panelGrid>
				</center>
				<p:separator />
			</h:form>
		</p:dialog>
		<!-- Ca nhan thang -->
		<p:dialog widgetVar="widgetKPIPersonalMonth" resizable="false"
			width="700" height="100" closeOnEscape="true"
			header="Báo cáo KPI cá nhân theo tháng" modal="true">
			<h:form id="dialogKPIPersonalMonth">
				<center>
					<p:progressBar id="progressBarClient" widgetVar="pbClient"
						style="width:480px" />
					<h:panelGrid columns="7" style="width:100%" cellspacing="1">
						<p:outputLabel value="Tháng: " />
						<p:selectOneMenu id="month"
							value="#{reportBean.monthSelectedPersonal}">
							<f:selectItems value="#{reportBean.months}" />
						</p:selectOneMenu>
						<p:selectOneMenu
							value="#{reportBean.departmentSelectedPersonalMonth}"
							converter="abstractConverter" effect="fade" var="t"
							style="width:150px;" filter="true" filterMatchMode="custom"
							filterFunction="customFilter">
							<p:ajax process="@this" />
							<f:selectItem itemLabel="--Tất cả phòng ban--"
								itemValue="#{null}" />
							<f:selectItems value="#{reportBean.departments}" var="item"
								itemLabel="#{item.name}" itemValue="#{item}" />
							<p:column>
								<h:outputText value="#{t.code}" />
							</p:column>
							<p:column>
								<h:outputText value="#{t.showAllNameDepart()}" escape="false" />
							</p:column>
						</p:selectOneMenu>
						<p:outputLabel value="Năm" />
						<p:spinner size="10" value="#{reportBean.yearSelectedPersonal1}"
							min="2017" max="2050">
							<p:ajax process="@this" />
						</p:spinner>
						<p:commandButton type="submit" value="PDF" ajax="false"
							style="background:#fbe4c6"
							actionListener="#{reportBean.showReportPersonalMonth()}"
							onclick="this.form.target='_blank'" icon="ui-icon-calculator" />
						<p:commandButton value="Xuất excel" immediate="true"
							style="float:right" ajax="false" id="btnPersonalMonth"
							actionListener="#{reportBean.excelPersonalMonth()}"
							onclick="start()" widgetVar="startButton1" />
					</h:panelGrid>
				</center>
				<p:separator />
			</h:form>
		</p:dialog>
		<!-- Ca nhan quy -->
		<p:dialog widgetVar="widgetKPIPersonalQuy" resizable="false"
			width="700" height="100" closeOnEscape="true"
			header="Báo cáo KPI cá nhân theo quý" modal="true">
			<h:form id="dialogKPIPersonalQuy">
				<center>
					<p:progressBar id="progressBarClient" widgetVar="pbClient"
						style="width:480px" />
					<h:panelGrid columns="7" style="width:100%" cellspacing="1">
						<p:outputLabel value="Quý: " />
						<p:selectOneMenu id="quy"
							value="#{reportBean.quySelectedPersonal}">
							<f:selectItems value="#{reportBean.quys}" />
						</p:selectOneMenu>
						<p:selectOneMenu
							value="#{reportBean.departmentSelectedPersonalQuy}"
							converter="abstractConverter" effect="fade" var="t"
							style="width:150px;" filter="true" filterMatchMode="custom"
							filterFunction="customFilter">
							<p:ajax process="@this" />
							<f:selectItem itemLabel="--Tất cả phòng ban--"
								itemValue="#{null}" />
							<f:selectItems value="#{reportBean.departments}" var="item"
								itemLabel="#{item.name}" itemValue="#{item}" />
							<p:column>
								<h:outputText value="#{t.code}" />
							</p:column>
							<p:column>
								<h:outputText value="#{t.showAllNameDepart()}" escape="false" />
							</p:column>
						</p:selectOneMenu>
						<p:outputLabel value="Năm" />
						<p:spinner size="10" value="#{reportBean.yearSelectedPersonal2}"
							min="2017" max="2050">
							<p:ajax process="@this" />
						</p:spinner>
						<p:commandButton type="submit" value="PDF" ajax="false"
							style="background:#fbe4c6"
							actionListener="#{reportBean.showReportPersonalQuy()}"
							onclick="this.form.target='_blank'" icon="ui-icon-calculator" />
						<p:commandButton value="Xuất excel" immediate="true"
							style="float:right" ajax="false" id="btnPersonalQuy"
							actionListener="#{reportBean.excelPersonalQuy()}"
							onclick="start()" widgetVar="startButton1" />
					</h:panelGrid>
				</center>
				<p:separator />
			</h:form>
		</p:dialog>
		<!-- Ca nhan nam -->
		<p:dialog widgetVar="widgetKPIPersonalYear" resizable="false"
			width="700" height="100" closeOnEscape="true"
			header="Báo cáo KPI cá nhân năm" modal="true">
			<h:form id="dialogKPIPersonalYear">
				<center>
					<p:progressBar id="progressBarClient" widgetVar="pbClient"
						style="width:480px" />
					<h:panelGrid columns="7" style="width:100%" cellspacing="1">
						<p:selectOneMenu
							value="#{reportBean.departmentSelectedPersonalYear}"
							converter="abstractConverter" effect="fade" var="t"
							style="width:150px;" filter="true" filterMatchMode="custom"
							filterFunction="customFilter">
							<p:ajax process="@this" />
							<f:selectItem itemLabel="--Tất cả phòng ban--"
								itemValue="#{null}" />
							<f:selectItems value="#{reportBean.departments}" var="item"
								itemLabel="#{item.name}" itemValue="#{item}" />
							<p:column>
								<h:outputText value="#{t.code}" />
							</p:column>
							<p:column>
								<h:outputText value="#{t.showAllNameDepart()}" escape="false" />
							</p:column>
						</p:selectOneMenu>
						<p:outputLabel value="Năm" />
						<p:spinner size="10" value="#{reportBean.yearSelectedPersonal3}"
							min="2017" max="2050">
							<p:ajax process="@this" />
						</p:spinner>
						<p:commandButton type="submit" value="PDF" ajax="false"
							style="background:#fbe4c6"
							actionListener="#{reportBean.showReportPersonalYear()}"
							onclick="this.form.target='_blank'" icon="ui-icon-calculator" />
						<p:commandButton value="Xuất excel" immediate="true"
							style="float:right" ajax="false" id="btnPersonalYear"
							actionListener="#{reportBean.excelPersonalYear()}"
							onclick="start()" widgetVar="startButton1" />
					</h:panelGrid>
				</center>
				<p:separator />
			</h:form>
		</p:dialog>
	</ui:define>
</ui:composition>