<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:pe="http://primefaces.org/ui/extensions"
	template="/pages/home.xhtml">

	<ui:define name="content">
		<style>
.selectbllb .ui-chkbox-label {
	font-size: 1.2em;
	margin-left: 20px;
	font-weight: bold;
}
</style>
		<h3 style="margin: 0px">Cài đặt nhân viên nghỉ thai sản hoặc
			không làm KPI</h3>
		<p:separator />
		<p:growl id="growlException" showDetail="true" sticky="false" />
		<h:form id="formEmpl">
			<div class="ui-g">
				<div class="ui-g-7">
					<p:selectOneMenu value="#{caiDatNgoaiLeBean.departmentSearch}"
						converter="abstractConverter" effect="fade" var="t"
						style="width:150px;margin-left:40%" id="iddeps" filter="true"
						filterMatchMode="custom" filterFunction="customFilter">
						<p:ajax event="change" update="dtEmployeeCenter"
							listener="#{caiDatNgoaiLeBean.ajaxHandleSelectDepartment()}" />
						<f:selectItems value="#{caiDatNgoaiLeBean.departmentSearchs}"
							var="item" itemLabel="#{item.name}" itemValue="#{item}" />
						<p:column>
							<h:outputText value="#{t.code}" />
						</p:column>
						<p:column>
							<h:outputText value="#{t.showAllNameDepart()}" escape="false" />
						</p:column>
					</p:selectOneMenu>
					<p:commandButton value="Đồng bộ" style="float:right;"
						styleClass="btnWarning" icon="fa fa-refresh"
						update="dtEmployeeCenter,growlException" process="@form"
						oncomplete="PF('dtEmplCenter').clearFilters()"
						actionListener="#{caiDatNgoaiLeBean.syncDataCenter()}" />
					<div style="clear: both" />
					<p:dataTable value="#{caiDatNgoaiLeBean.allEmpl}" paginator="true"
						rowsPerPageTemplate="25,100,150" scrollable="true"
						paginatorPosition="bottom" tyleClass="mystyle" rows="25"
						scrollHeight="100%" rowKey="#{item.id}" id="dtEmployeeCenter"
						var="item" style="width: 100%" rowIndexVar="rowIndex"
						filteredValue="#{caiDatNgoaiLeBean.allEmplFilter}"
						widgetVar="dtEmplCenter">
						<p:column headerText="..." style="width:7%;text-align:center;">
							<p:selectBooleanCheckbox value="#{item.select}" itemLabel="">
								<p:ajax process="@this" />
							</p:selectBooleanCheckbox>
						</p:column>
						<p:column headerText="STT" style="width:8%;text-align:center;">
							<h:outputText value="#{rowIndex+1}" />
						</p:column>
						<p:column headerText="Mã nhân viên"
							style="width:15%;text-align:center; min-height: 200px!important;">
							<h:outputText value="#{item.employee_code}" />
						</p:column>
						<p:column headerText="Nhân viên" style="width:30%">
							<h:outputText value="#{item.employee_name}" />
						</p:column>
						<p:column headerText="Phòng ban"
							style="width:40%;text-align:center">
							<h:outputText value="#{item.department_name}" />
						</p:column>
						<f:facet name="footer">
							<div style="clear: both;" />
						</f:facet>
					</p:dataTable>
				</div>
				<div class="ui-g-5">
					<p:selectOneMenu value="#{caiDatNgoaiLeBean.menuExceptionSelected}"
						style="width:150px;margin-left:5%" id="selectMenuEx">
						<p:ajax event="change" update="formEmpl"
							listener="#{caiDatNgoaiLeBean.ajaxHandleSelectOneMenu()}" />
						<f:selectItem itemLabel="Chọn" itemValue="" />
						<f:selectItem itemLabel="Không làm KPI" itemValue="KHONGLAM" />
						<f:selectItem itemLabel="Không xét KPI" itemValue="KHONGXET" />
						<f:selectItem itemLabel="Nghỉ ốm" itemValue="NGHIOM" />
						<f:selectItem itemLabel="Thai sản" itemValue="THAISAN" />
					</p:selectOneMenu>
					<p:outputLabel value="Năm" style="margin-left:20px" />
					<p:spinner size="10" style="margin-left: 10px"
						value="#{caiDatNgoaiLeBean.yearSearch}" min="2020" max="2050">
						<p:ajax process="@this" />
					</p:spinner>
					<p:commandButton value="Lưu/cập nhật" style="float:right;"
						styleClass="btnWarning" icon="fa fa-save" update="growlException"
						process="@form"
						actionListener="#{caiDatNgoaiLeBean.saveOrUpdate()}" />
					<div style="clear: both" />
					<p:dataTable value="#{caiDatNgoaiLeBean.months}"
						rendered="#{caiDatNgoaiLeBean.renderTableMonth}" paginator="true"
						rowsPerPageTemplate="25,100,150" scrollable="true"
						paginatorPosition="bottom" tyleClass="mystyle" rows="25"
						scrollHeight="100%" rowKey="#{item1.id}" id="dtMonth" var="item1"
						style="width: 100%" rowIndexVar="rowIndex"
						filteredValue="#{caiDatNgoaiLeBean.allEmplFilter}"
						widgetVar="dtEmplCenter">
						<p:column headerText="..." style="width:20%;text-align:center;">
							<p:selectBooleanCheckbox value="#{item1.select}" itemLabel="">
								<p:ajax process="@this" />
							</p:selectBooleanCheckbox>
						</p:column>
						<p:column filterBy="#{item.month}"
							filterFunction="#{abstractCustomFilter.filterByText}"
							headerText="Tháng" style="width:80%;text-align:center">
							<h:outputText value="#{item1.month}" />
						</p:column>
						<f:facet name="footer">
							<div style="clear: both;" />
						</f:facet>
					</p:dataTable>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>